# Redis Sentinel Configuration

# 哨兵端口
port 26379

# 守护进程模式
daemonize no

# PID文件
pidfile "/var/run/redis-sentinel.pid"

# 日志文件
logfile ""

# 工作目录
dir "/data"

# 保护模式
protected-mode no

# 绑定地址
bind 0.0.0.0

# 日志级别
loglevel notice

# 通知
notify-keyspace-events ""

# 客户端输出缓冲区限制
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# 监控的主节点配置
# 格式: sentinel monitor <master-name> <ip> <port> <quorum>
# quorum: 需要多少个哨兵同意才能执行故障转移
sentinel myid b7d927b002df4b0ddf5dca69ddbd859db2fe23b7

# 主节点认证密码
sentinel deny-scripts-reconfig yes

# 故障转移时，最多有多少个从节点同时对新的主节点进行同步
sentinel monitor redis-master 172.18.0.4 6379 2

# 主节点无响应多长时间后认为主节点下线 (毫秒)
sentinel down-after-milliseconds redis-master 5000

# 故障转移超时时间
sentinel failover-timeout redis-master 10000

# 禁止脚本重配置
sentinel auth-pass redis-master CG1rMeyRryFgvElf8n

# 脚本路径 (可选)
# sentinel notification-script redis-master /path/to/script.sh
# sentinel client-reconfig-script redis-master /path/to/script.sh

# 通知脚本 (可选)
# sentinel notification-script redis-master /var/redis/notify.sh

# 客户端重配置脚本 (可选)
# sentinel client-reconfig-script redis-master /var/redis/reconfig.sh

# 注意：以下配置项会在运行时自动生成和管理
# - sentinel myid: 哨兵实例的唯一标识符
# - sentinel known-replica: 已知的从节点列表
# - sentinel known-sentinel: 已知的哨兵节点列表
# - sentinel config-epoch: 配置纪元
# - sentinel leader-epoch: 领导者纪元
# - sentinel current-epoch: 当前纪元
# Generated by CONFIG REWRITE
sentinel config-epoch redis-master 0
sentinel leader-epoch redis-master 0
sentinel known-replica redis-master 172.18.1.4 6379
sentinel known-replica redis-master 172.18.1.3 6379
sentinel known-replica redis-master 172.18.1.2 6379
sentinel known-replica redis-master 172.18.1.1 6379
dis-master 172.18.1.1 6379

sentinel current-epoch 0
